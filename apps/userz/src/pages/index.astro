---
import Layout from "../components/Layout.astro";
import { sql} from "../components/helpers/gql";
import  chunk  from 'lodash/chunk';
type Data = {genid:string; text:string}[]
 
const resp2  =  sql(`select * from qlatest order by id desc limit 30;`);
const resp3 =  sql(`select hashtag,count from qtags order by count desc limit 30;`);
 
const resp = await Promise.all([resp2, resp3]).then((values) => { 
	return({qlatest:values[0],qtags:values[1]})}) as {qlatest: Data, qtags:{hashtag:string,count:number}[]};
const chunks = chunk(resp.qlatest, 10) as Data[]
 
---

<Layout title="userz dot net." tags={resp.qtags}>

		<div class="container mx-auto">
		<div class="grid grid-cols-1  sm:grid-cols-2 md:grid-cols-3">
		{chunks.map((chunk) => (
			<div>
			{
				chunk.map(({genid,text}) => (
					<div class="grid">
					<a href={'/'+genid} class="p-6  m-3  border border-emerald-600 border-4 rounded-lg shadow hover:bg-gray-800 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700">
						<h5 class="mb-2 text-xl xs:text-2xl sm:text-3xl font-bold tracking-tight text-gray-200">	{text.replaceAll('?',' ')}</h5>
					</a>
					</div>
				))
			}
			</div>
		))}
			
		
		</div>
		</div>
 
</Layout>
